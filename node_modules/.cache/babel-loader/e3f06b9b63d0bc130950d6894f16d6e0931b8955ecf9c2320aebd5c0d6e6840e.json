{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FirstFrame(){const[frameUrl,setFrameUrl]=useState('');const[videoUrl,setVideoUrl]=useState('');useEffect(()=>{async function fetchStoredUrl(){const response=await fetch('http://localhost:3001/video');if(response.ok){const data=await response.json();setVideoUrl(data.url);}}fetchStoredUrl();},[]);const handleFetchFirstFrame=async url=>{try{const response=await fetch(\"/video/first-frame?url=\".concat(encodeURIComponent(url)));if(response.ok){// Expecting JSON response with imageUrl\nconst data=await response.json();setFrameUrl(data.imageUrl);}else{// Error handling for non-ok responses\nconsole.error('Failed to fetch the first frame:',response.statusText);alert('Failed to fetch the first frame.');}}catch(error){// Network or parsing error handling\nconsole.error('Error fetching the first frame:',error);alert('Error occurred while fetching the first frame.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center mt-12\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"border-2 border-black py-2 px-3 m-2 roboto-medium rounded-md bg-white tracking-wider\",onClick:()=>handleFetchFirstFrame(videoUrl),children:\"Get first frame as an image\"}),frameUrl&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-1/4\",src:frameUrl,alt:\"First frame of the video\"}),/*#__PURE__*/_jsx(\"a\",{className:\"border-2 border-black py-1 px-2 m-2 roboto-medium rounded-md bg-white tracking-wider\",href:frameUrl,download:\"first-frame.jpg\",children:\"Download First Frame\"})]})]});}export default FirstFrame;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","FirstFrame","frameUrl","setFrameUrl","videoUrl","setVideoUrl","fetchStoredUrl","response","fetch","ok","data","json","url","handleFetchFirstFrame","concat","encodeURIComponent","imageUrl","console","error","statusText","alert","className","children","onClick","src","alt","href","download"],"sources":["C:/Users/sargi/Desktop/Task/TaskRepo/ClientRepo/src/Components/FirstFrame.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction FirstFrame() {\r\n  const [frameUrl, setFrameUrl] = useState('');\r\n  const [videoUrl, setVideoUrl] = useState('');\r\n\r\n  useEffect(() => {\r\n    async function fetchStoredUrl() {\r\n      const response = await fetch('http://localhost:3001/video');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setVideoUrl(data.url);\r\n      }\r\n    }\r\n\r\n    fetchStoredUrl();\r\n  }, []);\r\n\r\n  const handleFetchFirstFrame = async (url) => {\r\n    try {\r\n      const response = await fetch(`/video/first-frame?url=${encodeURIComponent(url)}`);\r\n      if (response.ok) {\r\n        // Expecting JSON response with imageUrl\r\n        const data = await response.json();\r\n        setFrameUrl(data.imageUrl);\r\n      } else {\r\n        // Error handling for non-ok responses\r\n        console.error('Failed to fetch the first frame:', response.statusText);\r\n        alert('Failed to fetch the first frame.');\r\n      }\r\n    } catch (error) {\r\n      // Network or parsing error handling\r\n      console.error('Error fetching the first frame:', error);\r\n      alert('Error occurred while fetching the first frame.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='flex flex-col items-center justify-center mt-12'>\r\n      <button \r\n        className='border-2 border-black py-2 px-3 m-2 roboto-medium rounded-md bg-white tracking-wider' \r\n        onClick={() => handleFetchFirstFrame(videoUrl)}\r\n      >\r\n        Get first frame as an image\r\n      </button>\r\n      {frameUrl && (\r\n        <>\r\n          <img className='w-1/4' src={frameUrl} alt=\"First frame of the video\" />\r\n          <a \r\n            className='border-2 border-black py-1 px-2 m-2 roboto-medium rounded-md bg-white tracking-wider' \r\n            href={frameUrl} \r\n            download=\"first-frame.jpg\"\r\n          >\r\n            Download First Frame\r\n          </a>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FirstFrame;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,cAAe,CAAAY,cAAcA,CAAA,CAAG,CAC9B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAC3D,GAAID,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAClCN,WAAW,CAACK,IAAI,CAACE,GAAG,CAAC,CACvB,CACF,CAEAN,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,qBAAqB,CAAG,KAAO,CAAAD,GAAG,EAAK,CAC3C,GAAI,CACF,KAAM,CAAAL,QAAQ,CAAG,KAAM,CAAAC,KAAK,2BAAAM,MAAA,CAA2BC,kBAAkB,CAACH,GAAG,CAAC,CAAE,CAAC,CACjF,GAAIL,QAAQ,CAACE,EAAE,CAAE,CACf;AACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAClCR,WAAW,CAACO,IAAI,CAACM,QAAQ,CAAC,CAC5B,CAAC,IAAM,CACL;AACAC,OAAO,CAACC,KAAK,CAAC,kCAAkC,CAAEX,QAAQ,CAACY,UAAU,CAAC,CACtEC,KAAK,CAAC,kCAAkC,CAAC,CAC3C,CACF,CAAE,MAAOF,KAAK,CAAE,CACd;AACAD,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvDE,KAAK,CAAC,gDAAgD,CAAC,CACzD,CACF,CAAC,CAED,mBACEpB,KAAA,QAAKqB,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9D1B,IAAA,WACEyB,SAAS,CAAC,sFAAsF,CAChGE,OAAO,CAAEA,CAAA,GAAMV,qBAAqB,CAACT,QAAQ,CAAE,CAAAkB,QAAA,CAChD,6BAED,CAAQ,CAAC,CACRpB,QAAQ,eACPF,KAAA,CAAAF,SAAA,EAAAwB,QAAA,eACE1B,IAAA,QAAKyB,SAAS,CAAC,OAAO,CAACG,GAAG,CAAEtB,QAAS,CAACuB,GAAG,CAAC,0BAA0B,CAAE,CAAC,cACvE7B,IAAA,MACEyB,SAAS,CAAC,sFAAsF,CAChGK,IAAI,CAAExB,QAAS,CACfyB,QAAQ,CAAC,iBAAiB,CAAAL,QAAA,CAC3B,sBAED,CAAG,CAAC,EACJ,CACH,EACE,CAAC,CAEV,CAEA,cAAe,CAAArB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}